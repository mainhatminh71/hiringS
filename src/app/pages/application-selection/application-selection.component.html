<div class="p-8">
  <div class="flex items-center justify-between mb-8">
    <h2 class="text-2xl font-bold tracking-tight text-slate-800 mb-0">Make an application form</h2>
    
    @if (selectedIds.size > 0) {
      <button nz-button nzType="primary" nzDanger (click)="deleteSelected()" class="flex items-center gap-2 rounded-lg">
        <nz-icon nzType="delete" nzTheme="outline"></nz-icon>
        Delete ({{selectedIds.size}})
      </button>
    }
  </div>
  
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 auto-rows-[128px]">
    <!-- Blank Form Card (Create New) -->
    <app-application-form-card 
      [routerLink]="'/form-generation'" 
      [showSwatch]="false"
      variant="dashed"
    >
      <div class="flex flex-col items-center justify-center gap-3 text-center w-full h-full text-slate-500 hover:text-indigo-600 transition-colors">
        <div class="p-2 rounded-full bg-slate-100 group-hover:bg-indigo-50 transition-colors">
          <nz-icon nzType="plus" nzTheme="outline" class="text-xl"></nz-icon>
        </div>
        <div class="font-medium">Blank form</div>
      </div>
    </app-application-form-card>

    <!-- Application Forms -->
    @for (app of applications; track app.id) {
    <app-application-form-card 
      [routerLink]="'/form-generation/' + app.id" 
      [themeColor]="app.themeColor"
      [selectable]="true"
      [selected]="selectedIds.has(app.id)"
      (selectedChange)="toggleSelection(app.id, $event)"
    >
      <div class="flex flex-col gap-1.5">
        <div class="text-[16px] font-medium text-slate-700 truncate leading-snug" [title]="app.name || 'MewMew'">
          {{app.name || 'Application Form'}}
        </div>      
        <div class="text-[13px] font-normal text-slate-400">
          {{getInstanceCount(app)}} questions
        </div>
      </div>
    </app-application-form-card>
    }
  </div>
</div>
