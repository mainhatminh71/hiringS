<div class="application-selection-page">
  <div class="page-container">
    <!-- Header Section -->
    <div class="page-header">
      <div class="header-content animate-in">
        <h1 class="page-title">Application Forms</h1>
        <p class="page-subtitle">Create and manage your application forms</p>
      </div>
      
      @if (selectedIds.size > 0) {
        <button 
          nz-button 
          nzType="primary" 
          nzDanger 
          (click)="deleteSelected()" 
          class="delete-button">
          <nz-icon nzType="delete" nzTheme="outline"></nz-icon>
          <span>Delete ({{selectedIds.size}})</span>
        </button>
      }
    </div>

    <!-- Content Section -->
    @if (isLoading) {
      <div class="loading-container">
        <nz-spin [nzSize]="'large'"></nz-spin>
      </div>
    } @else {
      <div class="cards-grid">
        <!-- Blank Form Card (Create New) -->
        <app-application-form-card 
          routerLink="/form-generation" 
          [showSwatch]="false"
          [variant]="'dashed'"
          class="create-card">
          <div class="create-card-content">
            <div class="create-icon-wrapper">
              <nz-icon nzType="plus" nzTheme="outline"></nz-icon>
            </div>
            <div class="create-text">Create new form</div>
            <div class="create-hint">Start from scratch</div>
          </div>
        </app-application-form-card>

        <!-- Application Forms -->
        @for (app of applications; track trackByFormId($index, app)) {
          <app-application-form-card 
            [routerLink]="'/form-generation/' + app.id" 
            [themeColor]="app.themeColor"
            [selectable]="true"
            [selected]="selectedIds.has(app.id)"
            (selectedChange)="toggleSelection(app.id, $event)"
            class="form-card stagger-item">
            <div class="form-card-content">
              <div class="form-card-title" [title]="app.name || 'Application Form'">
                {{app.name || 'Application Form'}}
              </div>
              <div class="form-card-meta">
                <span class="meta-item">
                  <nz-icon nzType="file-text" nzTheme="outline"></nz-icon>
                  {{getInstanceCount(app)}} questions
                </span>
              </div>
            </div>
          </app-application-form-card>
        }
      </div>
    }
  </div>
</div>
